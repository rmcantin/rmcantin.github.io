<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>BayesOpt: Contribute to the library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BayesOpt
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('contriblib.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Contribute to the library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#addcomp">Adding components</a><ul><li class="level2"><a href="#addfunct">Adding functors (kernels, criteria and mean functions)</a></li>
</ul>
</li>
<li class="level1"><a href="#modpy">Modifying the Python interface:</a><ul><li class="level2"><a href="#instcython">Install Cython:</a></li>
<li class="level2"><a href="#modcython">Working with Cython:</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="addcomp"></a>
Adding components</h1>
<p>Thanks to the modular design, adding new components is very easy. Most of the inner functions (kernels, criteria, etc.) are designed as functors (function objects). Thus, we just need to inherit from the interface (abstract) functor or one of the existing functions. Then, we need to include the reference in the corresponding factory module and the new functor would be automatically integrated, including advanced usage (for example: annealing).</p>
<p>Although it would be more efficient to use a template system. The functors are instantiated dynamically using a factory model. This allows great flexibility without recompiling the library, which is specially important while using interpreted languages (Python, Matlab, etc.).</p>
<h2><a class="anchor" id="addfunct"></a>
Adding functors (kernels, criteria and mean functions)</h2>
<p>The three elements follow the same structure. The interface (abstract class) and the factory model are defined in the <code>*_functors</code>.hpp and <code>*_functors</code>.cpp files, respectively.</p>
<p>Then, there are two types of functors: atomic and combined. Atomic functors are used to define directly a function (e.g.: a Gaussian kernel) and they return a value. Combined functors are used to combine 2 or more functors (e.g.: sum of kernels), which can be atomic or combined (e.g.: a sum of products of kernels).</p>
<p>Combined kernels and mean functions only allows binary expressions -2 elements- as they represent associative functions (sum, product, etc.). Meanwhile combined criteria support any number of elements (see cHedge function in <a class="el" href="bopttheory.html#combcri">Combined criteria</a>).</p>
<p>Finally, add the corresponding register with the new function name in the Factory model in <code>*_functors</code>.cpp</p>
<h1><a class="anchor" id="modpy"></a>
Modifying the Python interface:</h1>
<p>Read this part <b>only if you need to modify</b> the Python interface.</p>
<h2><a class="anchor" id="instcython"></a>
Install Cython:</h2>
<p>First, you need to install Cython:</p>
<p>In <b>Ubuntu/Debian</b>, you can get it by running: </p><pre class="fragment">&gt;&gt; sudo apt-get install cython
</pre><p>In <b>MacOS</b> you can install macports and run: </p><pre class="fragment">&gt;&gt; sudo port install py27-cython
</pre><p>Or we can download it from the website: <a href="http://cython.org">http://cython.org</a></p>
<h2><a class="anchor" id="modcython"></a>
Working with Cython:</h2>
<p>The interface is defined in <code>python/bayesopt.pyx</code> file, which is written in Cython, a mixture of C and Python code. For more information, check the online documentation <a href="http://docs.cython.org/">http://docs.cython.org/</a></p>
<p>Then, you need to run the Cython compiler.</p>
<pre class="fragment">$ cython --cplus bayesopt.pyx
</pre><p>which generates the file <code>python/bayesopt.cpp</code>, which can be directly used in the library. Python would only find the library if it is called exactly <code>bayesopt.so</code> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="reference.html">Reference Manual</a></li>
    <li class="footer">Generated on Wed Feb 25 2015 01:47:51 for BayesOpt by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
