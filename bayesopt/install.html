<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>BayesOpt: Installing BayesOpt</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BayesOpt
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('install.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Installing BayesOpt </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#unixinst">Install in Linux/MacOS</a><ul><li class="level2"><a href="#cinlinux">Linux:</a></li>
<li class="level2"><a href="#cinmac">MacOS:</a></li>
<li class="level2"><a href="#compile">Compile the library:</a><ul><li class="level3"><a href="#docbuild">Building the documentation</a></li>
</ul>
</li>
<li class="level2"><a href="#instpython">Python interface:</a><ul><li class="level3"><a href="#notepython">Issues with multiple Python versions:</a></li>
</ul>
</li>
<li class="level2"><a href="#instmatlab">MATLAB/Octave interface:</a><ul><li class="level3"><a href="#Generate">interface from Octave</a></li>
<li class="level3"><a href="#notematlab">Issues on libstdc++ linking:</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#cinwin">Install in Windows and other systems</a><ul><li class="level2"><a href="#instmatlabwin">MATLAB/Octave interface:</a><ul><li class="level3"><a href="#matlabmingw">MATLAB and MinGW</a></li>
</ul>
</li>
<li class="level2"><a href="#instpythonwin">Python interface:</a></li>
</ul>
</li>
<li class="level1"><a href="#testing">Test the installation.</a></li>
<li class="level1"><a href="#confinst">Configure the compilation/install</a><ul><li class="level2"><a href="#instshared">Compile as shared libraries</a></li>
<li class="level2"><a href="#instpath">Install the library in a different path</a></li>
<li class="level2"><a href="#mininst">Minimal installation (fast compilation)</a></li>
</ul>
</li>
<li class="level1"><a href="#getDepend">Dependencies</a></li>
<li class="level1"><a href="#comptests">Compatibility tests</a><ul><li class="level2"><a href="#notetests">Notes on tested systems:</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>The core of BayesOpt uses standard C/C++ code (C++98) so it can be compiled from many C++ compilers (gcc, clang, MSVC...). The library also include wrappers for Python, Matlab and Octave interfaces.</p>
<p>First, choose the install instructions based on your operating system: </p><ul>
<li><a class="el" href="install.html#unixinst">Install in Linux/MacOS</a> </li>
<li><a class="el" href="install.html#cinwin">Install in Windows and other systems</a></li>
</ul>
<p>Once you have installed the library with your desired interface, you can <a class="el" href="install.html#testing">Test the installation.</a></p>
<p>For an advanced installation, you can read <a class="el" href="install.html#confinst">Configure the compilation/install</a> and you can get a detailed explanation of the dependencies needed in <a class="el" href="install.html#getDepend">Dependencies</a>.</p>
<hr/>
<h1><a class="anchor" id="unixinst"></a>
Install in Linux/MacOS</h1>
<p>The compilation is very similar in any *nix system. Following these instructions, the library will be compiled using the default configuration. You can modify that easily as explained in <a class="el" href="install.html#confinst">Configure the compilation/install</a></p>
<h2><a class="anchor" id="cinlinux"></a>
Linux:</h2>
<p>For Ubuntu/Debian, the minimum dependencies (C/C++) can be optained by running: </p><pre class="fragment">&gt;&gt; sudo apt-get install libboost-dev cmake cmake-curses-gui g++
</pre><p>If you want the Python interface: </p><pre class="fragment">&gt;&gt; sudo apt-get install python-dev python-numpy
</pre><p>If you want the Octave interface (note that the <em>octave</em> package does not include all the necessary files): </p><pre class="fragment">&gt;&gt; sudo apt-get install octave-headers
</pre><p>And for all dependencies: </p><pre class="fragment">&gt;&gt; sudo apt-get install libboost-dev python-dev python-numpy cmake cmake-curses-gui g++ cython octave-headers freeglut3-dev
</pre><h2><a class="anchor" id="cinmac"></a>
MacOS:</h2>
<p>This section assumes <b>macports</b> is installed. Similar packages can be found in <b>fink</b> or <b>homebrew</b>. For the minimal install, run: </p><pre class="fragment">&gt;&gt; sudo port install boost gcc47 cmake
</pre><p>If you want the Python interface: </p><pre class="fragment">&gt;&gt; sudo port install python27 py27-numpy
</pre><p>If you want the Octave interface: </p><pre class="fragment">&gt;&gt; sudo port install octave
</pre><p>Again, for all dependencies: </p><pre class="fragment">&gt;&gt; sudo port install boost python27 py27-numpy gcc47 cmake py27-cython octave freeglut
</pre><h2><a class="anchor" id="compile"></a>
Compile the library:</h2>
<p>In order to compile the source code in a *nix system, run this from a terminal. </p><pre class="fragment">&gt;&gt; cmake . 
&gt;&gt; make
&gt;&gt; sudo make install
</pre><p><b>Important:</b> If you use <b>ccmake</b> instead of <b>cmake</b> you will access a graphical interface to select features such as the include the Python and Matlab interfaces, debug/release mode or if you want to use shared libraries or not. More details about how to configure it can be found in <a class="el" href="install.html#confinst">Configure the compilation/install</a></p>
<h3><a class="anchor" id="docbuild"></a>
Building the documentation</h3>
<p>If you have doxygen installed on your computer, you can compile the documentation right after compiling the code by running. </p><pre class="fragment">&gt;&gt; make doc
</pre><p> Thid documentation will appear in the "doc" subdirectory.</p>
<h2><a class="anchor" id="instpython"></a>
Python interface:</h2>
<p>Both Python development files (Python.h) and Numpy are needed if you want the python interface. The library has been tested with Python 2.5, 2.6 and 2.7. The interface relies on Numpy arrays. If we want to select the option to compile the Python interface we can just run: </p><pre class="fragment">&gt;&gt; cmake -DBAYESOPT_PYTHON_INTERFACE=ON . 
</pre><p> or </p><pre class="fragment">&gt;&gt; ccmake . 
</pre><p> and select the corresponding option.</p>
<p><b>Important:</b> Python requires a special module with shared access and nonstandard name. Thus, it will build a separate module called "bayesopt.so". This module can be accessible from Python provided that it is in the PYTHONPATH or sys.path. It cannot be linked to any executable or other libraries. Use libbayesopt.* instead.</p>
<h3><a class="anchor" id="notepython"></a>
Issues with multiple Python versions:</h3>
<p>CMake has a special system to find the Python dependencies. However, sometimes, in systems where there are several instances of Python installed, it can find mixed dependencies.</p>
<p>If you find an error about incorrect Python versions or include files, you can fix this by checking the Python depencies found by CMake. Run: </p><pre class="fragment">&gt;&gt; ccmake . 
</pre><p> and press "t" to select advanced features. Then, look if the PYTHON_* variables point to the same install/version. Once it has been fixed. Press "c" several times to run the CMake processor. Finally, press "g" to generate the corresponding Makefiles.</p>
<h2><a class="anchor" id="instmatlab"></a>
MATLAB/Octave interface:</h2>
<p>Make sure the library is compiled with the MATLAB_COMPATIBLE option using ccmake. For Mac OS they must be shared.</p>
<h3><a class="anchor" id="Generate"></a>
interface from Octave</h3>
<p>Run the script <a class="el" href="compile__octave_8m_source.html">compile_octave.m</a>, which can be found in the <em>/matlab/</em> directory.</p>
<p>If bayesopt or nlopt are compiled as <b>shared</b> libraries, then, at run time, Octave also needs to access to the libraries. For example, LD_LIBRARY_PATH must include the folder where the libraries are. If the install path is the default, you can execute the exportlocalpath.sh script before calling MATLAB.</p>
<h3><a class="anchor" id="Generate"></a>
interface from Octave</h3>
<p>First, configure Matlab to compile mex files if you have not done that before. Run to check the supported compilers and select the appropiate: </p><pre class="fragment">&gt;&gt; mex -setup
</pre><p>Run the script <a class="el" href="compile__matlab_8m_source.html">compile_matlab.m</a>, which can be found in the <em>/matlab/</em> directory.</p>
<p>If bayesopt or nlopt are compiled as <b>shared</b> libraries, then, at run time, MATLAB also needs to access to the libraries. For example, LD_LIBRARY_PATH must include the folder where the libraries are. If the install path is the default, you can execute the exportlocalpath.sh script before calling MATLAB.</p>
<h3><a class="anchor" id="notematlab"></a>
Issues on libstdc++ linking:</h3>
<ul>
<li>
<p class="startli">Matlab for *nix OS may ship outdated libraries for gcc (e.g.: 4.3 in 2011b). You might get errors like this one: </p><pre class="fragment">/usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/cc1: /usr/local/MATLAB/R2010b/sys/os/glnxa64/libstdc++.so.6: version `GLIBCXX_3.4.14' not found (required by /usr/lib/libppl_c.so.2)
</pre><p>The solution is to change the symbolic links in /matlabroot/sys/os/glnx86 for <em>libgcc_s.so.1</em> and <em>libstdc++</em>.so.6 to point to the system libraries, which typically can be found in /lib or /usr/lib.</p>
<p class="endli"></p>
</li>
<li>
On MacOS there are known issues both in Matlab and Octave about the compiler linking with the worng std++ library for different reasons. See: <ul>
<li>
<a href="http://www.mathworks.com/matlabcentral/newsreader/view_thread/291752">http://www.mathworks.com/matlabcentral/newsreader/view_thread/291752</a> </li>
<li>
<a href="https://mailman.cae.wisc.edu/pipermail/octave-maintainers/2012-January/026341.html">https://mailman.cae.wisc.edu/pipermail/octave-maintainers/2012-January/026341.html</a> </li>
</ul>
</li>
</ul>
<hr/>
<h1><a class="anchor" id="cinwin"></a>
Install in Windows and other systems</h1>
<p>Install this components: </p><ul>
<li>CMake: <a href="http://www.cmake.org">http://www.cmake.org</a></li>
</ul>
<p>CMake for Windows provides a nice GUI where you can select your favorite C++ compiler (MinGW, Visual Studio, etc.). It will automatically create the necesary configuration files for the compiler (makefile, solution, etc.).</p>
<ul>
<li>Boost: <a href="http://www.boost.org">http://www.boost.org</a></li>
</ul>
<p>Since Boost they are pure template libraries, they do not require compilation. Just make sure the headers are on the include path. You can also add an entry named BOOST_ROOT in CMake with the corresponding path to the library.</p>
<ul>
<li>MinGW(optional): <a href="http://www.mingw.org">http://www.mingw.org</a></li>
</ul>
<p>If you do not have a C++ compiler, we recomend MinGW+MSYS. Then, you just need to compile from the command line with: </p><pre class="fragment">&gt;&gt; mingw32-make
</pre><p>The most important options/variables are explained in <a class="el" href="install.html#confinst">Configure the compilation/install</a>.</p>
<h2><a class="anchor" id="instmatlabwin"></a>
MATLAB/Octave interface:</h2>
<p>Make sure the library is compiled with the MATLAB_COMPATIBLE option and configure Matlab/Octave to compile mex files. For example, in Matlab you can run to check the supported compilers: </p><pre class="fragment">&gt;&gt; mex -setup
</pre><p>Run the corresponding script <a class="el" href="compile__matlab_8m_source.html">compile_matlab.m</a> or <a class="el" href="compile__octave_8m_source.html">compile_octave.m</a>, which can be found in the <em>/matlab/</em> directory.</p>
<p>If bayesopt or nlopt are compiled as <b>shared</b> libraries, then, at run time, MATLAB/Octave also needs to access to the libraries. You can modify the PATH variable or copy the dll files in the same bolder as the generated mexfile.</p>
<p><b>Important:</b> It is strongly recommended to compile bayesopt with exactly the same compiler that was select for mex files. For a list of the supported compilers for your Matlab version, you can check the online docs at mathworks.</p>
<h3><a class="anchor" id="matlabmingw"></a>
MATLAB and MinGW</h3>
<p>Unfortunately, MinGW has never been suported by Matlab. Thus I have also included a Makefile to generate the mex files outside Matlab. You might need to change the <code>MATLABROOT</code> path with the root folder of your Matlab install and copy the dlls. Then, run <code>mingw32-make</code>. Note that <code>mingw32-make</code> only supports 32 bits libraries, so you need a 32 bit version of Matlab. There is a fork of MinGW with 64 bit support under development, but it has not been tested here.</p>
<h2><a class="anchor" id="instpythonwin"></a>
Python interface:</h2>
<p>The Python interface has not been tested in <b>Windows</b> because getting the correct dependencies is highly involved. You might need to download and install: </p><ul>
<li>Python (binary and <b>sources</b>): <a href="http://www.python.org">http://www.python.org</a> </li>
<li>Numpy: <a href="http://new.scipy.org/download.html">http://new.scipy.org/download.html</a></li>
</ul>
<p>Also, read this article about how to link everything: <a href="http://docs.python.org/2/extending/windows.html#building-on-windows">http://docs.python.org/2/extending/windows.html#building-on-windows</a></p>
<hr/>
<h1><a class="anchor" id="testing"></a>
Test the installation.</h1>
<p>The library includes several test program that can be found in the <em>bin</em> folder. Furthermore, there are test programs respectively under the <em>python</em> and <em>matlab</em> folders. They provide examples of the different interfaces that BayesOpt provide.</p>
<ol>
<li>
<p class="startli">Run <b>bo_branin</b>. It should found one of the minima shown at the end of the run.</p>
<p>If this does not work, it might be because the program is not finding the correct dynamic libraries: </p><ul>
<li>
<p class="startli">In Windows, you can copy the DLLs to your working folder or include the lib folder in the system PATH.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">In some *nix systems, including Ubuntu, Debian and Mac OS, the library is installed by default in /usr/local/lib/. However, this folder is not included by default in the linker or Matlab paths by default. This is specially critical when building shared libraries. The script <em>exportlocalpaths.sh</em> makes sure that the folder with the libraries is included in all the necessary paths.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The Python package is compiled in a different file and installed in the proper folder by default (site-packages). Thus, the Python interface should work out of the box in Linux and Mac OS.</p>
<p class="endli"></p>
</li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli">Python: the scrip <b>demo_quad</b> gives a quick overview of all the features of the Python interface. The function to optimize is a 5-dimensional quadratic function <img class="formulaInl" alt="$x^* = [0.3]^5$" src="form_11.png"/> and <img class="formulaInl" alt="$y^* = 5.0$" src="form_12.png"/>. The discrete version just consider only 100 points randomly distributed in the <img class="formulaInl" alt="$[0,1]^5$" src="form_13.png"/> box, so the result might differ from the actual optimum.</p>
<p class="endli"></p>
</li>
<li>
Matlab/Octave: the scrip <b>runtest</b> also is configured to run different sets of test, the first one also on the Branin function. </li>
</ol>
<hr/>
<h1><a class="anchor" id="confinst"></a>
Configure the compilation/install</h1>
<p>CMake allows to configure the compilation using some variables (see for example how to compile the Python module in Linux). These variables can be set in Linux/MacOS from the command line with the -D flag: </p><pre class="fragment">&gt;&gt; cmake -DVARIABLE=VALUE .
</pre><p> For example </p><pre class="fragment">&gt;&gt; cmake -DCMAKE_BUILD_TYPE=Debug .
</pre><p>If you use ccmake in Linux/MacOS or CMake for Windows, you can access to a list of all the variables and their values. Just modify the value of the desired variable.</p>
<h2><a class="anchor" id="instshared"></a>
Compile as shared libraries</h2>
<p>We can select if we want BayesOpt and NLOPT compiled as shared libraries </p><pre class="fragment">BAYESOPT_BUILD_SHARED=ON 
NLOPT_BUILD_SHARED=ON
</pre><p> In this case, we also need to force rebuild NLOPT (by default it is not compiled if it is found in the system).</p>
<h2><a class="anchor" id="instpath"></a>
Install the library in a different path</h2>
<p>CMake allows to select the install path before compilation compilation. You just need to change the CMAKE_INSTALL_PREFIX variable. </p><pre class="fragment">CMAKE_INSTALL_PREFIX=/your/desired/path
</pre><h2><a class="anchor" id="mininst"></a>
Minimal installation (fast compilation)</h2>
<p>Sobol sequences can be used to for the initial design (see <a class="el" href="usemanual.html#initpar">Initialization parameters</a>). In many cases, the performance is similar to latin hypercube sampling, however including the Sobol components increases considerably the library size and the compilation time. Thus, it can be removed from compilation: </p><pre class="fragment">BAYESOPT_BUILD_SOBOL=OFF
</pre><p> Similarly, we can avoid to compile the example files and demos: </p><pre class="fragment">BAYESOPT_BUILD_EXAMPLES=OFF
</pre><hr/>
<h1><a class="anchor" id="getDepend"></a>
Dependencies</h1>
<p>CMake: The easiest way to compile this library is using the cross platform and cross compiler tool <a href="http://www.cmake.org/">CMake</a>.</p>
<p>Boost: This code uses Boost libraries for matrix operations (uBlas), random number generation, math functions and smart pointers. Boost can be found in many Linux and MacOS repositories. It can also be downloaded from <a href="http://www.boost.org">http://www.boost.org</a>.</p>
<p>OpenGL/FreeGLUT (optional): It is used for the demos that include visualization.</p>
<p>Python/Numpy (optional): Both Python development files (Python.h) and Numpy are needed if you want the Python interface. The library has been tested with Python 2.6 and 2.7. The interface relies on Numpy arrays.</p>
<p>Matlab/Octave (optional): The library is compatible with any Matlab from 2010 and Octave. If you want the Matlab interface, just make sure you have a C++ compiler compatible with your Matlab version.</p>
<p>NLOPT (included): A LGPL library for nonlinear optimization. It has been slightly modified and include the corresponding CMake files.</p>
<p>Sobol (included): A LGPL library to generate Sobol sequences.</p>
<p>Matplotpp (included): A GPL library for visualization and plotting. The code included in this package includes some bug-fixes and compiling issues. It requires OpenGL/GLUT.</p>
<h1><a class="anchor" id="comptests"></a>
Compatibility tests</h1>
<table class="doxtable">
<tr>
<th>API </th><th>Linux </th><th>MacOS </th><th>Win/MinGW </th><th>Win/MSVC  </th></tr>
<tr>
<td>C/C++ </td><td>OK </td><td>OK </td><td>OK </td><td>OK </td></tr>
<tr>
<td>Matlab </td><td>OK </td><td>OK </td><td>OK (32 bits) </td><td>OK </td></tr>
<tr>
<td>Octave </td><td>OK </td><td>OK </td><td>No test </td><td>No test </td></tr>
<tr>
<td>Python </td><td>OK </td><td>OK </td><td>No test </td><td>No test </td></tr>
</table>
<h2><a class="anchor" id="notetests"></a>
Notes on tested systems:</h2>
<ul>
<li>Linux: Debian 6.0, Ubuntu from 11.04</li>
<li>MacOS: 10.6 (Snow Leopard)</li>
<li>MS Windows: XP, Vista, 7</li>
</ul>
<p>Compilers:</p><ul>
<li>gcc: different versions from 4.1</li>
<li>clang: version 2.7</li>
<li>MinGW: version from 0.5</li>
<li>MSVC: Visual Studio Professional 2012, Express 2010-2012</li>
</ul>
<p>Interfaces</p><ul>
<li>Matlab from 2010a</li>
<li>Octave from version 3.2</li>
<li>Python from version 2.5 (not tested on Python 3) </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="reference.html">Reference Manual</a></li>
    <li class="footer">Generated on Wed Feb 25 2015 01:47:51 for BayesOpt by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
